define(["Ti/_/declare","Ti/_/lang","Ti/_/Gestures/GestureRecognizer"],function(h,g,i){return h("Ti._.Gestures.TwoFingerTap",i,{name:"twofingertap",_touchStartLocation:null,_touchEndLocation:null,_fingerDifferenceThresholdTimer:null,_fingerDifferenceThreshold:100,_driftThreshold:25,processTouchStartEvent:function(a){var e=a.changedTouches[0].clientX,b=a.changedTouches[0].clientY,c=a.touches.length,d=a.changedTouches.length;1==c&&1==d?(this._touchStartLocation=[{x:e,y:b}],this._fingerDifferenceThresholdTimer=
setTimeout(g.hitch(this,function(){this._touchStartLocation=null}),this._fingerDifferenceThreshold)):2==c&&1==d?(clearTimeout(this._fingerDifferenceThresholdTimer),this._touchStartLocation&&this._touchStartLocation.push({x:e,y:b})):this._touchStartLocation=2==c&&2==d?[{x:e,y:b},{x:a.changedTouches[1].clientX,y:a.changedTouches[1].clientY}]:null},processTouchEndEvent:function(a,e){var b=a.changedTouches[0].clientX,c=a.changedTouches[0].clientY,d=a.touches.length,f=a.changedTouches.length;if(1==d&&
1==f)this._touchEndLocation=[{x:b,y:c}],this._fingerDifferenceThresholdTimer=setTimeout(g.hitch(this,function(){this._touchStartLocation=null}),this._fingerDifferenceThreshold);else if(0==d&&(1==f||2==f)){if(this._touchStartLocation&&2===this._touchStartLocation.length){this._touchEndLocation||(this._touchEndLocation=[]);for(d=0;d<f;d++)this._touchEndLocation.push({x:b,y:c});if(2===this._touchEndLocation.length){b=Math.abs(this._touchStartLocation[0].x-this._touchEndLocation[0].x)<this._driftThreshold&&
Math.abs(this._touchStartLocation[0].y-this._touchEndLocation[0].y)<this._driftThreshold;c=Math.abs(this._touchStartLocation[1].x-this._touchEndLocation[1].x)<this._driftThreshold&&Math.abs(this._touchStartLocation[1].y-this._touchEndLocation[1].y)<this._driftThreshold;if(!b||!c)b=Math.abs(this._touchStartLocation[0].x-this._touchEndLocation[1].x)<this._driftThreshold&&Math.abs(this._touchStartLocation[0].y-this._touchEndLocation[1].y)<this._driftThreshold,c=Math.abs(this._touchStartLocation[1].x-
this._touchEndLocation[0].x)<this._driftThreshold&&Math.abs(this._touchStartLocation[1].y-this._touchEndLocation[0].y)<this._driftThreshold;b&&c&&!e._isGestureBlocked(this.name)&&(this.blocking.push("singletap"),this.blocking.push("doubletap"),this.blocking.push("longpress"),e._handleTouchEvent(this.name,{x:(this._touchStartLocation[0].x+this._touchStartLocation[1].x)/2,y:(this._touchStartLocation[0].y+this._touchStartLocation[1].y)/2}))}this._touchStartLocation=null}}else this._touchStartLocation=
null},finalizeTouchEndEvent:function(){this.blocking=[]},processTouchCancelEvent:function(){this._touchStartLocation=null}})});