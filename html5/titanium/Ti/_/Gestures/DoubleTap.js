define(["Ti/_/declare","Ti/_/lang","Ti/_/Gestures/GestureRecognizer"],function(f,h,g){return f("Ti._.Gestures.DoubleTap",g,{name:"doubletap",_firstTapTime:null,_firstTapLocation:null,_timeThreshold:250,_driftThreshold:25,initTracker:function(a,b){this._firstTapTime=(new Date).getTime();this._firstTapLocation={x:a,y:b}},processTouchEndEvent:function(a,b){if(0==a.touches.length&&1==a.changedTouches.length){var c=a.changedTouches[0].clientX,d=a.changedTouches[0].clientY;if(this._firstTapTime){var e=
(new Date).getTime()-this._firstTapTime;this._firstTapTime=null;e<this._timeThreshold&&Math.abs(this._firstTapLocation.x-c)<this._driftThreshold&&Math.abs(this._firstTapLocation.y-d)<this._driftThreshold?(e=this.getSourceNode(a,b),b._isGestureBlocked(this.name)||(this.blocking.push("singletap"),b._handleTouchEvent("dblclick",{x:c,y:d,source:e}),b._handleTouchEvent(this.name,{x:c,y:d,source:e}))):this.initTracker(c,d)}else this.initTracker(c,d)}},finalizeTouchEndEvent:function(){this.blocking=[]},
processTouchCancelEvent:function(){this._firstTapTime=null}})});