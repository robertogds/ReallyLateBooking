// Generated by CoffeeScript 1.3.3
(function() {
  var emailRow, emailText, firstNameRow, firstNameText, lastNameRow, lastNameText, newAccountData, passwordRow, passwordText;

  root.newAccountTable = Titanium.UI.createTableView({
    top: 85,
    height: 176,
    width: '95%',
    borderWidth: 0,
    borderRadius: 10,
    scrollable: false,
    moving: false,
    backgroundColor: '#fff'
  });

  firstNameText = Titanium.UI.createTextField({
    backgroundColor: '#fff',
    width: '90%',
    height: '90%',
    color: '#336699',
    hintText: Ti.Locale.getString('firstName'),
    clearOnEdit: false,
    paddingLeft: 10,
    returnKeyType: Titanium.UI.RETURNKEY_NEXT
  });

  firstNameText.addEventListener('return', function(e) {
    return lastNameText.focus();
  });

  firstNameText.addEventListener('focus', function(e) {
    return root.newAccountTable.top = 10;
  });

  lastNameText = Titanium.UI.createTextField({
    backgroundColor: '#fff',
    width: '90%',
    height: '90%',
    color: '#336699',
    hintText: Ti.Locale.getString('lastName'),
    clearOnEdit: false,
    paddingLeft: 10,
    returnKeyType: Titanium.UI.RETURNKEY_NEXT
  });

  lastNameText.addEventListener('return', function(e) {
    return emailText.focus();
  });

  lastNameText.addEventListener('focus', function(e) {
    return root.newAccountTable.top = 10;
  });

  emailText = Titanium.UI.createTextField({
    backgroundColor: '#fff',
    width: '90%',
    height: '90%',
    color: '#336699',
    hintText: Ti.Locale.getString('email'),
    clearOnEdit: false,
    paddingLeft: 10,
    keyboardType: Titanium.UI.KEYBOARD_EMAIL,
    returnKeyType: Titanium.UI.RETURNKEY_NEXT
  });

  emailText.addEventListener('return', function(e) {
    return passwordText.focus();
  });

  emailText.addEventListener('focus', function(e) {
    return root.newAccountTable.top = 10;
  });

  passwordText = Titanium.UI.createTextField({
    backgroundColor: '#fff',
    width: '90%',
    height: '90%',
    color: '#336699',
    hintText: Ti.Locale.getString('password'),
    paddingLeft: 10,
    clearOnEdit: true,
    passwordMask: true,
    returnKeyType: Titanium.UI.RETURNKEY_DONE
  });

  passwordText.addEventListener('focus', function(e) {
    return root.newAccountTable.top = 10;
  });

  passwordText.addEventListener('return', function(e) {
    var email, firstName, lastName, password, validate;
    root.newAccountTable.top = 85;
    email = emailText.value;
    password = passwordText.value;
    firstName = firstNameText.value;
    lastName = lastNameText.value;
    validate = root.validateNewAccountData(email, password, firstName, lastName, password);
    if (validate === true) {
      root.showLoading(root.newAccountWindow);
      return root.doRegister(email, password, firstName, lastName);
    } else {
      return Ti.UI.createAlertDialog({
        title: 'ReallyLateBooking',
        message: L('reviewData') + ': ' + validate
      }).show();
    }
  });

  newAccountData = [];

  firstNameRow = Titanium.UI.createTableViewRow({
    width: '100%',
    height: 44
  });

  lastNameRow = Titanium.UI.createTableViewRow({
    width: '100%',
    height: 44
  });

  emailRow = Titanium.UI.createTableViewRow({
    width: '100%',
    height: 44
  });

  passwordRow = Titanium.UI.createTableViewRow({
    width: '100%',
    height: 44
  });

  firstNameRow.add(firstNameText);

  lastNameRow.add(lastNameText);

  emailRow.add(emailText);

  passwordRow.add(passwordText);

  newAccountData.push(firstNameRow);

  newAccountData.push(lastNameRow);

  newAccountData.push(emailRow);

  newAccountData.push(passwordRow);

  root.newAccountTable.setData(newAccountData);

  root.newAccountButton = new root.GenericButton(280, Ti.Locale.getString('register')).button;

  root.newAccountButton.addEventListener('click', function(e) {
    var email, firstName, lastName, password, validate;
    root.newAccountTable.top = 85;
    email = emailText.value;
    password = passwordText.value;
    firstName = firstNameText.value;
    lastName = lastNameText.value;
    validate = root.validateNewAccountData(email, password, firstName, lastName, password);
    if (validate === true) {
      root.showLoading(root.newAccountWindow);
      return root.doRegister(email, password, firstName, lastName);
    } else {
      return Ti.UI.createAlertDialog({
        title: 'ReallyLateBooking',
        message: L('reviewData') + ': ' + validate
      }).show();
    }
  });

}).call(this);
