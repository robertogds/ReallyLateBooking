(function(){root.xhrLogin=Titanium.Network.createHTTPClient();root.xhrLogin.onload=function(){var a;try{a=JSON.parse(this.responseText)}catch(b){Ti.UI.createAlertDialog({title:"ReallyLateBooking",message:L("errorHappened")+"\n"+b}).show()}200===a.status?(root.user=a.content,Titanium.App.Properties.setString("user",JSON.stringify(root.user)),root.loadAccountLabels(),root.signInWindow.close(),"deals"===root.tabGroup.activeTab.id?root.fetchCredits():root.fetchCreditsAsync()):Ti.UI.createAlertDialog({title:"ReallyLateBooking",
message:"Error: "+a.detail}).show();return root.hideLoading(root.signInView)};root.xhrLogin.onerror=function(a){root.showError(root.accountWindow);return Ti.API.error(a)};root.doLogin=function(a,b){Ti.API.info("*** Entra en doLogin");root.xhrLogin.setTimeout(15E3);root.xhrLogin.open("POST",root.surl+"/users/login");root.xhrLogin.setRequestHeader("Content-Type","application/json; charset=utf-8");root.xhrLogin.setRequestHeader("Accept-Language",Titanium.Locale.currentLanguage);return root.xhrLogin.send(JSON.stringify({email:a,
password:b}))};root.validateLoginData=function(a,b){return!(3<a.length)?Ti.Locale.getString("errorEmail"):!(3<b.length)?Ti.Locale.getString("errorPassword"):!0}}).call(this);