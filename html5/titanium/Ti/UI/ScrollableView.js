define("Ti/_/browser,Ti/_/declare,Ti/_/UI/KineticScrollView,Ti/_/lang,Ti/_/dom,Ti/_/style,Ti/UI,Ti/_/event".split(","),function(t,n,o,l,p,q,g){var j=q.set,k=require.is,r=l.isDef,s=p.unitize,m=require.on.once;return n("Ti.UI.ScrollableView",o,{constructor:function(){this._initKineticScrollView(g.createView({left:0,top:0,width:g.SIZE,height:"100%",layout:"constrainingHorizontal"}),"horizontal");this._add(this._pagingControlContainer=g.createView({width:"100%",height:20,bottom:0,backgroundColor:"black",
opacity:0,touchEnabled:!1}));this._pagingControlContainer._add(this._pagingControlContentContainer=g.createView({width:g.SIZE,height:"100%",top:0,touchEnabled:!1,layout:"constrainingHorizontal"}));this.properties.__values__.views=[];this._viewToRemoveAfterScroll=-1;require.on(this,"postlayout",this._updateTranslation)},_handleDragStart:function(){var a=this.currentPage;~a&&(this._showView(a-1),this._showView(a),this._showView(a+1),this.fireEvent("dragStart"))},_handleDrag:function(a){var d=this.currentPage,
b=this.views[d];b&&this.fireEvent("scroll",{currentPage:d,currentPageAsFloat:d-a.distanceX/b._measuredWidth,view:b})},_handleDragCancel:function(){var a=this.currentPage;~a&&(this._hideView(a-1),this._showView(a),this._hideView(a+1))},_handleDragEnd:function(a,d){if(~this.currentPage&&r(d)){var d=Math.max(0.4,Math.min(3,d)),b=this,c=b.views,f=b.currentPage,i=a.distanceX,g=c[f]._measuredWidth/(0.4<Math.abs(d)?200:2),e=c[f],h=f;i>g&&0<f?(h=f-1,i=(e=c[h])._measuredLeft-b._currentTranslationX):i<-g&&
f<c.length-1&&(h=f+1,i=b._currentTranslationX-(e=c[h])._measuredLeft);c=-e._measuredLeft;b.fireEvent("dragEnd",{currentPage:h,view:e});b._animateToPosition(c,0,Math.abs(1.724*(c-b._currentTranslationX)/d),"ease-out",function(){h!==f-1&&b._hideView(f-1);h!==f&&b._hideView(f);h!==f+1&&b._hideView(f+1);b.properties.__values__.currentPage=h;b._showView(h);setTimeout(function(){b.fireEvent("scrollEnd",{currentPage:h,view:e})},1)})}},_hideView:function(a){var d=this.views;0<=a&&a<d.length&&j(d[a].domNode,
"display","none")},_showView:function(a){var d=this.views;0<=a&&a<d.length&&j(d[a].domNode,"display","inherit")},addView:function(a){a&&(this.views.push(a),this._contentContainer._add(a),1==this.views.length?this.properties.__values__.currentPage=0:j(a.domNode,"display","none"))},removeView:function(a){a=k(a,"Number")?a:this.views.indexOf(a);0>a||a>=this.views.length||(a==this.currentPage&&1!==this.views.length?(this._viewToRemoveAfterScroll=a,this.scrollToView(a==this.views.length-1?--a:++a)):this._removeViewFromList(a))},
_removeViewFromList:function(a){var d=this._contentContainer,b=this;a<this.currentPage&&b.properties.__values__.currentPage--;d._remove(b.views.splice(a,1)[0]);!b.views.length&&(b.properties.__values__.currentPage=-1);m(g,"postlayout",function(){setTimeout(function(){b._updateTranslation()},1)});b._updatePagingControl(b.currentPage)},_updateTranslation:function(){~this.currentPage&&this._setTranslation(-this.views[this.currentPage]._measuredLeft,0)},scrollToView:function(a){function d(){var a=c._contentContainer,
d=c.currentPage,g=-c.views[b]._measuredLeft,e;duration=400+0.3*Math.abs(b-c.currentPage)*a._measuredWidth;if(d<b)for(e=d+1;e<=b;e++)c._showView(e);else for(e=b;e<d;e++)c._showView(e);c._updatePagingControl(b);c._animateToPosition(g,0,duration,"ease-in-out",function(){c.properties.__values__.currentPage=b;if(d<b)for(e=d;e<b;e++)c._hideView(e);else for(e=b+1;e<=d;e++)c._hideView(e);-1!==c._viewToRemoveAfterScroll&&(g+=c.views[c._viewToRemoveAfterScroll]._measuredWidth,c._removeViewFromList(c._viewToRemoveAfterScroll),
c._viewToRemoveAfterScroll=-1);c.fireEvent("scrollEnd",{currentPage:b,view:c.views[b]})})}var b=k(a,"Number")?a:this.views.indexOf(a),c=this;0>b||b>=this.views.length||b==this.currentPage||(c._contentContainer.domNode.offsetWidth?d():m(c,"postlayout",d))},_showPagingControl:function(){this.showPagingControl?this._isPagingControlActive||(this._isPagingControlActive=!0,this._pagingControlContainer.animate({duration:250,opacity:0.75}),0<this.pagingControlTimeout&&setTimeout(l.hitch(this,function(){this._pagingControlContainer.animate({duration:750,
opacity:0});this._isPagingControlActive=!1}),this.pagingControlTimeout)):this._pagingControlContainer.opacity=0},_updatePagingControl:function(a,d){if(this.showPagingControl){this._pagingControlContentContainer._removeAllChildren();for(var b=this.pagingControlHeight/2,c=0;c<this.views.length;c++)this._pagingControlContentContainer._add(g.createView({width:b,height:b,left:5,right:5,backgroundColor:c===a?"white":"grey",borderRadius:s(b/2)}));!d&&this._showPagingControl()}},_defaultWidth:g.FILL,_defaultHeight:g.FILL,
properties:{currentPage:{set:function(a,d){return 0<=a&&a<this.views.length?(this.scrollToView(a),a):d},value:-1},pagingControlColor:{set:function(a){return this._pagingControlContainer.backgroundColor=a},value:"black"},pagingControlHeight:{set:function(a){return this._pagingControlContainer.height=a},value:20},pagingControlTimeout:{set:function(a){0==this.pagingControlTimeout&&this._updatePagingControl();return a},value:1250},showPagingControl:{set:function(a){0==this.pagingControlTimeout&&this._updatePagingControl();
return a},value:!1},views:{set:function(a){if(k(a,"Array")){var d=0,b=a.length,c=this._contentContainer,f;for(c._removeAllChildren();d<b;d++)(f=a[d]).width="100%",f.height="100%",c._add(f);this.properties.__values__.currentPage=b?0:-1;return a}},post:function(){this._updatePagingControl(this.currentPage,!0)}}}})});