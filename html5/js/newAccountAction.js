(function(){root.xhrRegister=Titanium.Network.createHTTPClient();root.xhrRegister.onload=function(){var a;root.hideLoading(root.newAccountWindow);Ti.API.info("USER: "+this.responseText);a=JSON.parse(this.responseText);if(200===a.status){if(root.hideLoading(root.editAccountWindow),root.user=a.content,Titanium.App.Properties.setString("user",JSON.stringify(root.user)),root.loadAccountLabels(),root.newAccountWindow.close(),root.editAccountWindow.close(),"deals"===root.tabGroup.activeTab.id)return root.showConfirmBooking()}else return Ti.API.error(a.detail),
Ti.UI.createAlertDialog({title:"ReallyLateBooking",message:"Error: "+a.detail}).show()};root.xhrRegister.onerror=function(a){Ti.API.info("Entra en error register");root.hideLoading(root.newAccountWindow);root.hideLoading(root.editAccountWindow);root.showError();return Ti.API.error(a)};root.doRegister=function(a,c,e,f,b){var d;root.xhrRegister.setTimeout(8E3);0<b?(b=root.urlSignature("/user/"+b),d=root.doSignature(b),b=root.surl+b+"/"+d,d="PUT"):(c=Titanium.Utils.md5HexDigest(c),b=root.url+"/users",
d="POST");root.xhrRegister.open(d,b);root.xhrRegister.setRequestHeader("Content-Type","application/json; charset=utf-8");root.xhrRegister.setRequestHeader("Accept-Language",Titanium.Locale.currentLanguage);a=JSON.stringify({email:a,password:c,firstName:e,lastName:f,isFacebook:"false"});root.xhrRegister.send(a);return Ti.API.info("LLeta hasta el final")};root.validateNewAccountData=function(a,c,e,f,b){return c!==b?Ti.Locale.getString("passDoNotMatch"):!(3<a.length)||!/\@/.test(a)?Ti.Locale.getString("errorEmail"):
!(3<c.length)?Ti.Locale.getString("errorPassword"):!(0<e.length)?Ti.Locale.getString("errorFirstName"):!(0<f.length)?Ti.Locale.getString("errorLastName"):!0}}).call(this);