(function(){var f,b,j,k,l,h,i,c,g,e,d;h=function(){var a,b;a=String.formatDate(new Date);b=String.formatTime(new Date);return a+" "+b};k=Ti.UI.createView({backgroundColor:"#576c89",height:2,bottom:0});d=Ti.UI.createView({backgroundColor:"#e2e7ed",width:"100%",height:60});d.add(k);b=Ti.UI.createView({backgroundImage:"/images/whiteArrow.png",width:23,height:60,bottom:10,left:20});e=Ti.UI.createLabel({text:"Pull to reload",left:55,width:200,bottom:30,height:"auto",color:"#576c89",textAlign:"center",
font:{fontSize:13,fontWeight:"bold"},shadowColor:"#999",shadowOffset:{x:0,y:1}});i=Ti.UI.createLabel({text:"Last Updated: "+h(),left:55,width:200,bottom:15,height:"auto",color:"#576c89",textAlign:"center",font:{fontSize:12},shadowColor:"#999",shadowOffset:{x:0,y:1}});f=Titanium.UI.createActivityIndicator({left:20,bottom:13,width:30,height:30});d.add(b);d.add(e);d.add(i);d.add(f);root.dealsTable.headerPullView=d;g=c=!1;j=function(){root.reloadDeals=!0;root.loadDeals(root.city);return setTimeout(l,
3E3)};l=function(){g=!1;i.text=L("lastUpdated")+": "+h();e.text=L("pullRefresh")+"...";f.hide();return b.show()};root.dealsTable.addEventListener("scroll",function(a){a=a.contentOffset.y;-65>=a&&!c?(a=Ti.UI.create2DMatrix(),a=a.rotate(-180),c=!0,b.animate({transform:a,duration:180}),e.text=L("releaseRefresh")+"..."):c&&-65<a&&0>a&&(c=!1,a=Ti.UI.create2DMatrix(),b.animate({transform:a,duration:180}),e.text=L("pullRefresh")+"...");return 1});root.dealsTable.addEventListener("scrollEnd",function(a){c&&
!g&&-65>=a.contentOffset.y&&(g=!0,c=!1,b.hide(),f.show(),e.text=L("reloading")+"...",b.transform=Ti.UI.create2DMatrix(),j());return 1})}).call(this);