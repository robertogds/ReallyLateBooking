(function(){root.xhrBookings=Titanium.Network.createHTTPClient({timeout:15E3});root.xhrBookings.onload=function(){root.bookingsWindow.remove(root.errorView);root.bookingsLastUpdate=new Date;root.bookings=JSON.parse(this.responseText);return root.populateBookingsTable(root.bookings)};root.xhrBookings.onerror=function(){Ti.UI.createAlertDialog({title:"ReallyLateBooking",message:L("errorHappened")}).show();root.hideLoading(root.bookingsWindow);return root.showError(root.bookingsWindow)};root.xhrBookings.timedout=
function(){return Ti.UI.createAlertDialog({title:"ReallyLateBooking",message:L("errorHappened")}).show()};root.fetchBookingsConnect=function(){var a,b;Ti.API.info("FetchBookins es necesario actualizar");root.noBookingsView.hide();root.showLoading(root.bookingsWindow);b=root.urlSignature("/user/"+root.user.id+"/bookings");a=root.doSignature(b);root.xhrBookings.open("GET",root.url+(b+"/"+a));root.xhrBookings.setRequestHeader("Accept-Language",Titanium.Locale.currentLanguage);return root.xhrBookings.send()};
root.showBookings=function(){var a;Ti.API.info("Entra en showBookings");a=(new Date).getTime()-root.bookingsLastUpdate.getTime();Ti.API.info("FetchBookings -- La diferencia es "+a);if(void 0===root.bookings||1E5<a)return root.fetchBookingsConnect();Ti.API.info("FetchBookins NO es necesario actualizar");return root.populateBookingsTable(root.bookings)}}).call(this);