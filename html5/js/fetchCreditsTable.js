(function(){root.xhrCredits=Titanium.Network.createHTTPClient({timeout:15E3});root.xhrCredits.onload=function(){Ti.API.info("Entra en load credits OK"+this.responseText);root.creditsLastUpdate=new Date;root.listCreditsWindow.remove(root.errorView);Ti.API.info(this.responseText);root.credits=JSON.parse(this.responseText);Ti.API.info(this.responseText);root.creditsTable.footerView=root.footerView;root.hideLoading(root.listCreditsWindow);return root.populateCreditsTable(root.credits)};root.xhrCredits.onerror=
function(){Ti.UI.createAlertDialog({title:"ReallyLateBooking",message:L("errorHappened")}).show();return root.hideLoading(root.listCreditsWindow)};root.showCreditsConnect=function(){var a,b;root.showLoading(root.listCreditsWindow);b=root.urlSignature("/user/"+root.user.id+"/coupons");a=root.doSignature(b);root.xhrCredits.open("GET",root.url+(b+"/"+a));root.xhrCredits.setRequestHeader("Accept-Language",Titanium.Locale.currentLanguage);return root.xhrCredits.send()};root.showCredits=function(){var a;
Ti.API.info("Entra en showCredits");a=(new Date).getTime()-root.creditsLastUpdate.getTime();Ti.API.info("FetchCreditsTable -- La diferencia es "+a);if(void 0===root.credits||1E5<a)return root.showCreditsConnect();Ti.API.info("FetchCreditsTable NO es necesario actualizar");return root.populateCreditsTable(root.credits)}}).call(this);