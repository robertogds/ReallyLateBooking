define(["Ti/_/declare","Ti/_/lang","Ti/_/Gestures/GestureRecognizer"],function(g,d,h){return g("Ti._.Gestures.Drag",h,{name:"dragging",_touchStartLocation:null,_cancelDrag:function(a,b){this._touchStartLocation&&(this._touchStartLocation=null,!b._isGestureBlocked(this.name)&&d.hitch(b,b._handleTouchEvent("draggingcancel",{source:this.getSourceNode(a,b)})))},_createEvent:function(a,b){var c=a.changedTouches[0].clientX,d=a.changedTouches[0].clientY,e=c-this._touchStartLocation.x,f=d-this._touchStartLocation.y;
return{x:c,y:d,distanceX:e,distanceY:f,distance:Math.sqrt(Math.pow(e,2)+Math.pow(f,2)),source:this.getSourceNode(a,b)}},processTouchStartEvent:function(a,b){1==a.touches.length&&1==a.changedTouches.length?(this._touchStartLocation={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY},!b._isGestureBlocked(this.name)&&d.hitch(b,b._handleTouchEvent("draggingstart",this._createEvent(a,b)))):this._touchStartLocation&&this._cancelDrag(a,b)},processTouchEndEvent:function(a,b){var c=this._touchStartLocation;
c&&(c=Math.sqrt(Math.pow(a.changedTouches[0].clientX-c.x,2)+Math.pow(a.changedTouches[0].clientY-c.y,2)),0==a.touches.length&&1==a.changedTouches.length&&25<c?(!b._isGestureBlocked(this.name)&&d.hitch(b,b._handleTouchEvent("draggingend",this._createEvent(a,b))),this._touchStartLocation=null):this._cancelDrag(a,b))},processTouchMoveEvent:function(a,b){this._touchStartLocation&&(1==a.touches.length&&1==a.changedTouches.length?b._isGestureBlocked(this.name)||d.hitch(b,b._handleTouchEvent("dragging",
this._createEvent(a,b))):this._cancelDrag(a,b))},processTouchCancelEvent:function(a,b){this._touchStartLocation&&this._cancelDrag(a,b)}})});