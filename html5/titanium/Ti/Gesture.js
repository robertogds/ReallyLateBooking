define(["Ti/_/Evented","Ti/_/lang","Ti/UI","Ti/_/ready"],function(n,o,d,p){function j(){var a=!!(window.innerWidth&&window.innerWidth>window.innerHeight);c.constants.__values__.orientation=a?d.LANDSCAPE_LEFT:d.PORTRAIT;c.constants.__values__.landscape=a;c.constants.__values__.portrait=!a;return c.orientation}function k(a){var b=null,e=Math.abs(a.beta||a.y|0),l=Math.abs(a.gamma||a.x|0);5>e&&170<l&&(b=d.FACE_DOWN);5>e&&5>l&&(b=d.FACE_UP);50<e&&0>e&&f!=b&&(b=d.UPSIDE_PORTRAIT);null!==b&&f!==b&&c.fireEvent("orientationchange",
{orientation:f=b,source:a.source})}var h=window,i=require.on,f=null,m=(new Date).getTime(),g={},c=o.setObject("Ti.Gesture",n,{_updateOrientation:function(){j();f!==c.orientation&&c.fireEvent("orientationchange",{orientation:f=c.orientation})},isLandscape:function(){return c.landscape},isPortrait:function(){return c.portrait},constants:{portrait:!1,landscape:!1,orientation:d.UNKNOWN}});p(function(){j()});i(h,"MozOrientation",k);i(h,"deviceorientation",k);i(h,"devicemotion",function(a){var b=a.acceleration||
a.accelerationIncludingGravity,e,d;if(a=b&&{x:b.x,y:b.y,z:b.z,source:a.source}){if(void 0!==g.x&&(b=10<Math.abs(g.x-a.x),e=10<Math.abs(g.y-a.y),d=10<Math.abs(g.z-a.z),b&&(e||d)||e&&d))if(b=(new Date).getTime(),300<(a.timestamp=b-m))m=b,c.fireEvent("shake",a);g=a}});return c});