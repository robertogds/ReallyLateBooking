define(function(){var f={},c=[];return{dynamic:!0,normalize:function(b,c){var d=b.split("!"),a=d[0];d.shift();return(/^\./.test(a)?c(a):a)+(d.length?"!"+d.join("!"):"")},load:function(b,e,d){var a;a=b.split("!");var g;if(g=1<a.length&&"sandbox"===a[0])a.shift(),b=a.join("!");b=e.toUrl(/^\//.test(b)?b:"./"+b,c.length?{name:c[c.length-1]}:null);a=f[b]||e.cache(b);if(!a)if(a=new XMLHttpRequest,a.open("GET",b,!1),a.send(null),200===a.status)a=a.responseText;else throw Error('Failed to load include "'+
b+'": '+a.status);c.push(b);try{e.evaluate(f[b]=a,0,!g)}catch(h){throw h;}finally{c.pop()}d(a)}}});