(function(){Ti.include("/js/oneDealMapView.js","/js/imagesScrollView.js","/js/infoDealTable.js","/js/priceView.js","/js/oneDealView.js");root.showDealView=function(a){var g,b,h,c,i,d,j,e,k,f;Ti.API.info("======= DEAL "+JSON.stringify(a));root.deal=a;0===a.quantity?(root.oneDealView.remove(root.bookingButtonLabel),root.priceView.add(root.soldOutLabel),root.soldOutLabel.show(),root.bookingButtonLabel.hide()):(root.oneDealView.add(root.bookingButtonLabel),root.priceView.remove(root.soldOutLabel),root.soldOutLabel.hide(),
root.bookingButtonLabel.show());root.oneDealWindow.title=a.hotelName;root.oneDealImage.image=a.image10;root.oneDealPriceLabel.text=a.salePriceCents+"\u20ac";root.oneDealNormalPriceLabel.text=a.priceCents+"\u20ac";root.titleLabel.text=a.hotelName+"\n"+a.address;root.oneDealAddressLabel.text=a.address;root.hotelAddressLabel.text=a.address;root.hotelNameLabel.text=a.hotelName;root.regimenPriceLabel.text=!0===root.deal.breakfastIncluded?L("breakfastYes"):L("breakfastNo");root.shareTwitterImage.addEventListener("click",
function(){return root.shareToTwitter(L("shareTwitterText"))});root.shareFacebookImage.addEventListener("click",function(){var b;b={link:"http://www.reallylatebooking.com",name:String.format(L("shareFacebook"),a.hotelName,a.city.name),caption:"reallylatebooking.com",picture:a.image10,description:a.hotelText};return Titanium.Facebook.dialog("feed",b,function(a){if(!a.success&&a.error)return alert(a.error)})});root.shareEmailImage.addEventListener("click",function(){var b;b=Titanium.UI.createEmailDialog();
b.subject=L("shareEmailSubject");b.messageBody=String.format(L("shareEmailText"),a.hotelName,a.city.name);return b.open()});root.image1.image=a.image1;root.image2.image=a.image2;root.image3.image=a.image3;root.image4.image=a.image4;root.image5.image=a.image5;Ti.API.info(a.image1);Ti.API.info(a.image2);Ti.API.info(a.image3);Ti.API.info(a.image4);Ti.API.info(a.image5);c=L("detailTitle");e=L("hotelTitle");f=L("roomTitle");d=L("foodDrinkTitle");b=L("around");h=(new root.GenericTextRow).row;j=(new root.GenericTextRow).row;
k=(new root.GenericTextRow).row;i=(new root.GenericTextRow).row;g=(new root.GenericTextRow).row;Ti.API.info("****** Estamos en info con datos: ");c=(new root.GenericTextView(0,c,a.detailText)).view;e=(new root.GenericTextView(0,e,a.hotelText)).view;f=(new root.GenericTextView(0,f,a.roomText)).view;d=(new root.GenericTextView(0,d,a.foodDrinkText)).view;b=(new root.GenericTextView(0,b,a.aroundText)).view;h.add(c);j.add(e);k.add(f);i.add(d);g.add(b);b=[];b.push(h);b.push(j);b.push(k);b.push(i);b.push(g);
root.infoDealTable.setData(b);root.oneDealWindow.remove(root.infoDealTable);root.oneDealWindow.remove(root.mapView);root.oneDealWindow.add(root.oneDealView);if(Titanium.App.Properties.hasProperty("user")||Titanium.Facebook.loggedIn)root.bookingForEmail=root.user.email,root.bookingForFirstName=root.user.firstName,root.bookingForLastName=root.user.lastName;Ti.API.info("********* Entra con root.deal.priceDay2 = "+root.deal.priceDay2);return root.oneDealWindow.open()}}).call(this);