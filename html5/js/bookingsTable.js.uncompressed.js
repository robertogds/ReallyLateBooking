// Generated by CoffeeScript 1.3.3
(function() {

  Ti.include('/js/BookingsRow.js', '/js/fetchBookings.js');

  root.bookingsTable = Titanium.UI.createTableView({
    data: [],
    backgroundColor: 'transparent',
    separatorColor: '#1b3c50'
  });

  root.bookingsWindow.add(root.bookingsTable);

  root.bookingsTable.addEventListener('click', function(e) {
    root.showOneBookingView(e.row.booking);
    return root.tabGroup.tabs[root.bookingsTab.pos].open(root.oneBookingWindow, {
      animated: true
    });
  });

  root.populateBookingsTable = function(bookings) {
    var booking, bookingLabel, bookingRow, data, _i, _len;
    data = [];
    if (bookings.length === void 0 || bookings.length < 1) {
      root.noBookingsView.show();
    } else {
      for (_i = 0, _len = bookings.length; _i < _len; _i++) {
        booking = bookings[_i];
        bookingRow = new root.BookingsRow(booking);
        bookingLabel = Titanium.UI.createLabel({
          text: booking.checkinDate + '   ' + booking.hotelName + '    ' + booking.salePriceCents + 'â‚¬',
          color: '#fff',
          font: {
            fontSize: 12,
            fontWeight: 'bold'
          },
          left: 10,
          height: 50
        });
        bookingRow.row.add(bookingLabel);
        data.push(bookingRow.row);
      }
      root.bookingsTable.setData(data);
    }
    root.bookingsTable.footerView = root.footerView;
    return root.hideLoading(root.bookingsWindow);
  };

}).call(this);
