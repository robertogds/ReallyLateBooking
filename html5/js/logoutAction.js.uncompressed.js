// Generated by CoffeeScript 1.3.3
(function() {

  root.confirmLogout = Ti.UI.createAlertDialog({
    title: L('confirm'),
    message: L('sure_logout'),
    cancel: 1,
    buttonNames: [L('confirm'), L('cancel')]
  });

  root.confirmLogout.addEventListener('click', function(e) {
    Ti.API.info(e);
    if (e.index === 1) {
      return Ti.API.info('El usuario ha cancelado');
    } else {
      return root.doLogout();
    }
  });

  root.doLogout = function() {
    Ti.API.info('Entra root.doLogout');
    if (Titanium.Facebook.loggedIn) {
      Ti.Facebook.logout;
    }
    root.sharekit.logoutFromAll();
    root.user = null;
    Titanium.App.Properties.removeProperty("user");
    Titanium.App.Properties.removeProperty("facebookUser");
    root.loadUser();
    Ti.API.info('llama a loadAccountLabels');
    root.creditsTab.badge = '+5';
    return root.loadAccountLabels();
  };

}).call(this);
