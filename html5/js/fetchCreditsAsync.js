(function(){root.xhrFetchCredits=Titanium.Network.createHTTPClient({timeout:15E3});root.xhrFetchCredits.onload=function(){var b,a,d,c;Ti.API.info("fetchCreditsAsync OK");root.creditsLastUpdate=new Date;Ti.API.info("Entra en load credits OK");Ti.API.info(this.responseText);root.credits=JSON.parse(this.responseText);root.totalCredit=0;c=root.credits;for(a=0,d=c.length;a<d;a++)b=c[a],root.totalCredit+=b.credits;Ti.API.info("***** El valor total de los cr\u00e9ditos es: "+root.totalCredit);root.balanceLabel.text=
root.totalCredit+"\u20ac";root.creditsTab.badge=0===root.totalCredit?void 0:root.totalCredit;return root.hideLoading(root.creditsWindow)};root.xhrFetchCredits.onerror=function(){return Ti.API.info("Entra en load Credits ERROR")};root.fetchCreditsAsync=function(){var b,a;Ti.API.info("Entra en fetchCreditsAsync");a=root.urlSignature("/user/"+root.user.id+"/coupons");b=root.doSignature(a);root.xhrFetchCredits.open("GET",root.url+(a+"/"+b));root.xhrFetchCredits.setRequestHeader("Accept-Language",Titanium.Locale.currentLanguage);
root.xhrFetchCredits.send();return Ti.API.info("Sale de fetchCreditsAsync")}}).call(this);