(function(){root.xhrDeals=Titanium.Network.createHTTPClient({timeout:25E3});root.xhrDeals.onload=function(){var a;Ti.API.info("****** en fetchdeals obtenemos: "+this.responseText);root.hideLoading(root.citiesWindow);root.hideLoading(root.allCitiesWindow);a=JSON.parse(this.responseText);if(void 0===a.status)return root.showDeals(a);if(0===a.status)return Ti.API.info("**** Entra en waitingCity"),root.showNoDeals(a.message)};root.xhrDeals.onerror=function(){root.hideLoading(root.citiesWindow);root.hideLoading(root.allCitiesWindow);
Ti.UI.createAlertDialog({title:"ReallyLateBooking",message:L("errorHappened")}).show();root.hideLoading(root.listDealsWindow);return root.showError(root.citiesWindow)};root.fetchDeals=function(a){if(!1===Titanium.Network.online)return Ti.UI.createAlertDialog({title:"ReallyLateBooking",message:L("mustInternet")}).show(),root.showError(root.citiesWindow);root.xhrDeals.open("GET",root.url+"/v2/deals/"+a.url);root.xhrDeals.setRequestHeader("Accept-Language",Titanium.Locale.currentLanguage);return root.xhrDeals.send()};
root.fetchDealsFake=function(){return root.populateDealsTable([{hotelName:"Petit Palace Embassy",salePriceCents:140,roomType:"lujo",priceCents:250},{hotelName:"Hotel Regina",salePriceCents:135,roomType:"elegante",priceDay2:110,priceCents:200},{hotelName:"Vincci Soho",salePriceCents:120,roomType:"confort",priceCents:180}])}}).call(this);