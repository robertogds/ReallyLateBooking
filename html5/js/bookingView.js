(function(){var b,d,e,c,f,g;Ti.include("/js/expiresView.js","/js/creditCardTable.js","/js/nightsView.js","/js/bookingAction.js","/js/bookingWindow.js","/js/bookingForView.js","/js/confirmTable.js");root.bookingView=Titanium.UI.createView({backgroundColor:"#010101",borderWidth:0,top:0});root.hotelLabel=Titanium.UI.createLabel({top:4,height:28,textAlign:"center",font:{fontSize:20,fontWeight:"bold"},color:"#fff"});root.hotelAddress=Titanium.UI.createLabel({top:30,height:20,textAlign:"center",font:{fontSize:12,
fontWeight:"bold"},color:"#fff"});root.totalLabel=Titanium.UI.createLabel({top:60,width:110,height:28,textAlign:"center",color:"#868d92",font:{fontSize:14,fontWeight:"bold"},left:10});g=Titanium.UI.createLabel({top:60,width:90,height:28,text:L("credits").toUpperCase(),textAlign:"center",color:"#868d92",font:{fontSize:14,fontWeight:"bold"},left:120});f=Titanium.UI.createLabel({top:60,height:28,width:90,textAlign:"center",text:L("total").toUpperCase(),color:"#868d92",font:{fontSize:14,fontWeight:"bold"},
left:230});e=Titanium.UI.createLabel({top:85,height:28,text:"-",color:"#868d92",font:{fontSize:24,fontWeight:"bold"},left:120});d=Titanium.UI.createLabel({top:85,height:28,text:"=",color:"#868d92",font:{fontSize:24,fontWeight:"bold"},left:210});root.priceLabel=Titanium.UI.createLabel({top:90,height:24,width:110,color:"#fff",textAlign:"center",font:{fontSize:22,fontWeight:"bold"},left:10});root.priceCreditsLabel=Titanium.UI.createLabel({top:90,height:24,width:90,color:"#fff",textAlign:"center",font:{fontSize:22,
fontWeight:"bold"},left:120});root.priceFinalLabel=Titanium.UI.createLabel({top:90,height:24,width:90,color:"#fff",textAlign:"center",font:{fontSize:22,fontWeight:"bold"},left:230});b=(new root.GenericSeparatorView(140)).view;c=(new root.GenericSeparatorView(319)).view;root.bookingView.add(root.confirmTable);root.bookingView.add(b);root.bookingView.add(c);b=(new root.GenericPayButton("89%",L("confirm"))).label;root.confirmAlert=Ti.UI.createAlertDialog({title:L("confirm"),message:L("bookPaid"),cancel:1,
buttonNames:["Confirm","Cancel"]});root.confirmAlert.addEventListener("click",function(a){Ti.API.info(a);return 1===a.index?Ti.API.info("El usuario ha cancelado"):root.doBooking()});b.addEventListener("click",function(){var a;a=root.validateBookingData();return!0!==a?Ti.UI.createAlertDialog({title:"ReallyLateBooking",message:L("reviewData")+": "+a}).show():1>root.priceFinal?root.doBooking():root.doZoozPayment()});c=Titanium.UI.createLabel({borderWidth:0,height:Ti.UI.SIZE,top:340,text:L("noRefundable"),
color:"#fff",textAlign:"center",font:{fontSize:12,fontWeight:"bold"}});root.doZoozPayment=function(){return require("com.zooz.ti").doPayment({data:{amount:root.priceFinal,currencyCode:"EUR",appKey:"4b71ac79-9338-4cc0-91ad-220572fd54b3",isSandbox:!1,userEmail:root.user.email},success:function(){Ti.API.info("Result success!");return root.doBooking()},error:function(a){Ti.API.info("Callback error called.");return Ti.UI.createAlertDialog({title:L("transaction_failed"),message:"Error Code: "+a.errorCode+
" ; Error Message: "+a.errorMessage}).show()},cancel:function(){Ti.API.info("Callback cancel called.");return Ti.UI.createAlertDialog({title:L("transaction_aborted")}).show()}})};root.bookingView.add(root.hotelLabel);root.bookingView.add(root.totalLabel);root.bookingView.add(root.priceFinalLabel);root.bookingView.add(f);root.bookingView.add(g);root.bookingView.add(root.priceLabel);root.bookingView.add(root.priceCreditsLabel);root.bookingView.add(e);root.bookingView.add(d);root.bookingView.add(root.hotelAddress);
root.bookingView.add(c);root.bookingView.add(b);root.confirmBookingWindow.add(root.bookingView);root.showBookingView=function(){root.bookingNights=1;root.totalPrice=root.deal.salePriceCents;return Titanium.App.Properties.hasProperty("user")||Titanium.Facebook.loggedIn?root.fetchCredits():root.showSignInView("booking")}}).call(this);